{"ast":null,"code":"var _jsxFileName = \"/Users/macbookair/Documents/DeliveryApp/frontend/src/pages/verify/Verify.js\",\n  _s = $RefreshSig$();\n// import React, { useContext, useEffect } from 'react'\n// import \"./Verify.css\"\n// import { useNavigate, useSearchParams } from 'react-router-dom'\n// import { StoreContext } from '../../context/StoreContext';\n// import axios from \"axios\"\n\n// const Verify = () => {\n\n//   const [searchParams, setSearchParams] = useSearchParams();\n\n//   const success = searchParams.get(\"success\")\n//   const orderId = searchParams.get(\"orderId\")\n//   const {url} = useContext(StoreContext)\n//   const navigate = useNavigate();\n\n//   const verifyPayment = async () => {\n//     const response = await axios.post(url+\"/api/order/verify\",{success, orderId})\n\n//     if (response.data.success) {\n//        navigate(\"/myorders\");\n//     } else {\n//         navigate(\"/\")\n//     }\n//   }\n\n//    useEffect (() => {\n//     verifyPayment();\n//    })\n\n//   return (\n//     <div className='verify'>\n//         <div className='spinner'>\n\n//         </div>\n\n//     </div>\n//   )\n// }\n\n// export default Verify\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport \"./Verify.css\";\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { StoreContext } from '../../context/StoreContext';\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Verify = () => {\n  _s();\n  const [searchParams] = useSearchParams();\n  const success = searchParams.get(\"success\");\n  const orderId = searchParams.get(\"orderId\");\n  const {\n    url\n  } = useContext(StoreContext);\n  const navigate = useNavigate();\n  const [message, setMessage] = useState(\"Verifying your payment...\");\n  const verifyPayment = async () => {\n    try {\n      const response = await axios.post(`${url}/api/order/verify`, {\n        success,\n        orderId\n      });\n      console.log('Response from backend:', response.data); // Add this line for debugging\n\n      if (response.data.success) {\n        setMessage(\"Payment successful! Kinly check Redirecting...\");\n        setTimeout(() => navigate(\"/myorders\"), 2000); // Redirect after 2 seconds\n      } else {\n        setMessage(\"Payment failed. Redirecting to home...\");\n        setTimeout(() => navigate(\"/\"), 2000); // Redirect after 2 seconds\n      }\n    } catch (error) {\n      console.error(\"Error verifying payment:\", error);\n      setMessage(\"An error occurred. Please try again.\");\n      setTimeout(() => navigate(\"/\"), 2000); // Redirect after 2 seconds\n    }\n  };\n  useEffect(() => {\n    verifyPayment();\n  }, [navigate, orderId, success, url]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"verify\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spinner\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"verify-message\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n_s(Verify, \"ovqclZKIR7meVAZyA7siXgUOMKE=\", false, function () {\n  return [useSearchParams, useNavigate];\n});\n_c = Verify;\nexport default Verify;\nvar _c;\n$RefreshReg$(_c, \"Verify\");","map":{"version":3,"names":["React","useContext","useEffect","useState","useNavigate","useSearchParams","StoreContext","axios","jsxDEV","_jsxDEV","Verify","_s","searchParams","success","get","orderId","url","navigate","message","setMessage","verifyPayment","response","post","console","log","data","setTimeout","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/macbookair/Documents/DeliveryApp/frontend/src/pages/verify/Verify.js"],"sourcesContent":["// import React, { useContext, useEffect } from 'react'\n// import \"./Verify.css\"\n// import { useNavigate, useSearchParams } from 'react-router-dom'\n// import { StoreContext } from '../../context/StoreContext';\n// import axios from \"axios\"\n\n// const Verify = () => {\n\n\n//   const [searchParams, setSearchParams] = useSearchParams();\n\n//   const success = searchParams.get(\"success\")\n//   const orderId = searchParams.get(\"orderId\")\n//   const {url} = useContext(StoreContext)\n//   const navigate = useNavigate();\n\n//   const verifyPayment = async () => {\n//     const response = await axios.post(url+\"/api/order/verify\",{success, orderId})\n\n//     if (response.data.success) {\n//        navigate(\"/myorders\");\n//     } else {\n//         navigate(\"/\")\n//     }\n//   }\n\n//    useEffect (() => {\n//     verifyPayment();\n//    })\n\n\n//   return (\n//     <div className='verify'>\n//         <div className='spinner'>\n\n//         </div>\n\n\n//     </div>\n//   )\n// }\n\n// export default Verify\n\n\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport \"./Verify.css\";\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { StoreContext } from '../../context/StoreContext';\nimport axios from \"axios\";\n\nconst Verify = () => {\n  const [searchParams] = useSearchParams();\n  const success = searchParams.get(\"success\");\n  const orderId = searchParams.get(\"orderId\");\n  const { url } = useContext(StoreContext);\n  const navigate = useNavigate();\n  const [message, setMessage] = useState(\"Verifying your payment...\");\n\n  const verifyPayment = async () => {\n    try {\n      const response = await axios.post(`${url}/api/order/verify`, { success, orderId });\n      \n      console.log('Response from backend:', response.data); // Add this line for debugging\n\n      if (response.data.success) {\n        setMessage(\"Payment successful! Kinly check Redirecting...\");\n        setTimeout(() => navigate(\"/myorders\"), 2000); // Redirect after 2 seconds\n      } else {\n        setMessage(\"Payment failed. Redirecting to home...\");\n        setTimeout(() => navigate(\"/\"), 2000); // Redirect after 2 seconds\n      }\n    } catch (error) {\n      console.error(\"Error verifying payment:\", error);\n      setMessage(\"An error occurred. Please try again.\");\n      setTimeout(() => navigate(\"/\"), 2000); // Redirect after 2 seconds\n    }\n  };\n\n  useEffect(() => {\n    verifyPayment();\n  }, [navigate, orderId, success, url]);\n\n  return (\n    <div className='verify'>\n      <div className='spinner'></div>\n      <div className='verify-message'>{message}</div>\n    </div>\n  );\n};\n\nexport default Verify;\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAGA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;;AAEA;;AAIA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC9D,OAAO,cAAc;AACrB,SAASC,WAAW,EAAEC,eAAe,QAAQ,kBAAkB;AAC/D,SAASC,YAAY,QAAQ,4BAA4B;AACzD,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,MAAM,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnB,MAAM,CAACC,YAAY,CAAC,GAAGP,eAAe,CAAC,CAAC;EACxC,MAAMQ,OAAO,GAAGD,YAAY,CAACE,GAAG,CAAC,SAAS,CAAC;EAC3C,MAAMC,OAAO,GAAGH,YAAY,CAACE,GAAG,CAAC,SAAS,CAAC;EAC3C,MAAM;IAAEE;EAAI,CAAC,GAAGf,UAAU,CAACK,YAAY,CAAC;EACxC,MAAMW,QAAQ,GAAGb,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACc,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,2BAA2B,CAAC;EAEnE,MAAMiB,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMd,KAAK,CAACe,IAAI,CAAC,GAAGN,GAAG,mBAAmB,EAAE;QAAEH,OAAO;QAAEE;MAAQ,CAAC,CAAC;MAElFQ,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEH,QAAQ,CAACI,IAAI,CAAC,CAAC,CAAC;;MAEtD,IAAIJ,QAAQ,CAACI,IAAI,CAACZ,OAAO,EAAE;QACzBM,UAAU,CAAC,gDAAgD,CAAC;QAC5DO,UAAU,CAAC,MAAMT,QAAQ,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;MACjD,CAAC,MAAM;QACLE,UAAU,CAAC,wCAAwC,CAAC;QACpDO,UAAU,CAAC,MAAMT,QAAQ,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;MACzC;IACF,CAAC,CAAC,OAAOU,KAAK,EAAE;MACdJ,OAAO,CAACI,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChDR,UAAU,CAAC,sCAAsC,CAAC;MAClDO,UAAU,CAAC,MAAMT,QAAQ,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;IACzC;EACF,CAAC;EAEDf,SAAS,CAAC,MAAM;IACdkB,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACH,QAAQ,EAAEF,OAAO,EAAEF,OAAO,EAAEG,GAAG,CAAC,CAAC;EAErC,oBACEP,OAAA;IAAKmB,SAAS,EAAC,QAAQ;IAAAC,QAAA,gBACrBpB,OAAA;MAAKmB,SAAS,EAAC;IAAS;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,eAC/BxB,OAAA;MAAKmB,SAAS,EAAC,gBAAgB;MAAAC,QAAA,EAAEX;IAAO;MAAAY,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC5C,CAAC;AAEV,CAAC;AAACtB,EAAA,CAtCID,MAAM;EAAA,QACaL,eAAe,EAIrBD,WAAW;AAAA;AAAA8B,EAAA,GALxBxB,MAAM;AAwCZ,eAAeA,MAAM;AAAC,IAAAwB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}